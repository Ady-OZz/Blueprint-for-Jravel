<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jravel: Engineering Roadmap & Architecture</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        stone: {
                            50: '#fafaf9',
                            100: '#f5f5f4',
                            200: '#e7e5e4',
                            800: '#292524',
                            900: '#1c1917',
                        },
                        teal: {
                            500: '#14b8a6',
                            600: '#0d9488',
                            700: '#0f766e',
                        },
                        indigo: {
                            500: '#6366f1',
                            600: '#4f46e5',
                            900: '#312e81',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4; 
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e; 
        }

        /* Chart Container Strict Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Interactive Element Transitions */
        .interactive-card {
            transition: all 0.3s ease;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Gauge Meter CSS */
        .meter-bar {
            transition: width 0.3s ease, background-color 0.3s ease;
        }
    </style>

    <!-- Placeholder Comments -->
    <!-- Chosen Palette: Warm Stone & Deep Teal. Reason: Combines the warmth of travel/hospitality with the precision of engineering. -->
    
    <!-- Application Structure Plan: 
         Structure: Dashboard layout with a fixed sidebar (desktop) / top bar (mobile) and a dynamic content area.
         Why: The source material is complex and multifaceted (Timeline, Architecture, Tech Stack). A dashboard allows the user to switch contexts (e.g., "What are we building?" to "How are we building it?") without losing their place.
         Flow: 
         1. Overview: Executive summary.
         2. Roadmap: The core 12-week plan interactive timeline.
         3. Architecture: Visual breakdown of the stack.
         4. Algorithms: Interactive demos of the specific unique selling points (Stress Meter, Debt Algo).
    -->

    <!-- Visualization & Content Choices:
         1. Roadmap: Interactive Timeline (HTML/JS). Goal: Show progression. Interaction: Click phases to see details.
         2. Architecture: Block Diagram (HTML Grid). Goal: Explain data flow. Interaction: Hover to see component roles.
         3. Tech Stack: Radar Chart (Chart.js). Goal: Show balance of technologies.
         4. Stress Meter: Custom JS Slider/Gauge. Goal: Demonstrate the logic behind "Pace Analysis".
         5. Debt Algo: Step-by-step text visualizer. Goal: Explain the "Splitwise-Lite" logic.
         Confirmation: NO SVG or Mermaid used.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 text-stone-800 font-sans antialiased h-screen overflow-hidden flex flex-col md:flex-row">

    <!-- Mobile Header -->
    <header class="md:hidden bg-white border-b border-stone-200 p-4 flex justify-between items-center z-20">
        <div class="font-bold text-xl text-teal-700">Jravel<span class="text-stone-400 font-light">.Eng</span></div>
        <button id="mobile-menu-btn" class="text-stone-600 focus:outline-none">
            <span class="text-2xl">☰</span>
        </button>
    </header>

    <!-- Sidebar Navigation -->
    <aside id="sidebar" class="bg-white w-full md:w-64 border-r border-stone-200 flex-shrink-0 flex flex-col h-full absolute md:relative transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-10 shadow-xl md:shadow-none">
        <div class="p-6 border-b border-stone-100 hidden md:block">
            <h1 class="font-bold text-2xl text-teal-700 tracking-tight">Jravel<span class="text-stone-400 font-light">.Eng</span></h1>
            <p class="text-xs text-stone-500 mt-1 uppercase tracking-wider">Engineering Blueprint</p>
        </div>

        <nav class="flex-1 overflow-y-auto p-4 space-y-1">
            <button onclick="router('overview')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-stone-50 transition-colors group active-nav" data-target="overview">
                <span class="text-stone-400 group-hover:text-teal-600">⦿</span>
                <span class="font-medium text-stone-600 group-hover:text-stone-900">Overview</span>
            </button>
            <button onclick="router('roadmap')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-stone-50 transition-colors group" data-target="roadmap">
                <span class="text-stone-400 group-hover:text-teal-600">⟷</span>
                <span class="font-medium text-stone-600 group-hover:text-stone-900">12-Week Roadmap</span>
            </button>
            <button onclick="router('architecture')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-stone-50 transition-colors group" data-target="architecture">
                <span class="text-stone-400 group-hover:text-teal-600">⏍</span>
                <span class="font-medium text-stone-600 group-hover:text-stone-900">System Architecture</span>
            </button>
            <button onclick="router('algorithms')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-stone-50 transition-colors group" data-target="algorithms">
                <span class="text-stone-400 group-hover:text-teal-600">ƒ(x)</span>
                <span class="font-medium text-stone-600 group-hover:text-stone-900">Core Algorithms</span>
            </button>
            <button onclick="router('stack')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-stone-50 transition-colors group" data-target="stack">
                <span class="text-stone-400 group-hover:text-teal-600">❖</span>
                <span class="font-medium text-stone-600 group-hover:text-stone-900">Tech Stack</span>
            </button>
        </nav>

        <div class="p-4 border-t border-stone-100 bg-stone-50">
            <div class="text-xs font-semibold text-stone-400 uppercase mb-2">Project Status</div>
            <div class="flex items-center justify-between text-sm">
                <span class="text-stone-600">Timeline</span>
                <span class="font-mono text-teal-600 font-bold">12 Weeks</span>
            </div>
            <div class="w-full bg-stone-200 rounded-full h-1.5 mt-2">
                <div class="bg-teal-500 h-1.5 rounded-full" style="width: 15%"></div>
            </div>
            <div class="text-[10px] text-stone-400 mt-1 text-right">Phase 1 In Progress</div>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto relative w-full h-full" id="main-content">
        
        <!-- SECTION: OVERVIEW -->
        <section id="view-overview" class="view-section p-6 md:p-10 max-w-6xl mx-auto space-y-8">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-stone-900 mb-2">Executive Summary</h2>
                <p class="text-stone-600 max-w-3xl">
                    Jravel is a "Google Docs for Travel" platform combining real-time collaboration with Generative AI decision support. 
                    This dashboard outlines the engineering roadmap to transform fragmented travel planning into a unified, intelligent workflow.
                </p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- KPI Card 1 -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm interactive-card">
                    <div class="text-stone-400 text-sm font-semibold uppercase tracking-wider mb-2">Problem</div>
                    <div class="text-lg font-medium text-stone-800">Fragmented Planning</div>
                    <p class="text-stone-500 text-sm mt-2">
                        Users currently juggle WhatsApp threads, spreadsheets, and booking tabs, leading to chaos.
                    </p>
                </div>
                <!-- KPI Card 2 -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm interactive-card">
                    <div class="text-teal-600 text-sm font-semibold uppercase tracking-wider mb-2">Solution</div>
                    <div class="text-lg font-medium text-stone-800">Collaborative AI Canvas</div>
                    <p class="text-stone-500 text-sm mt-2">
                        A real-time synchronized workspace backed by Gemini 1.5 Flash for intelligent itinerary validation.
                    </p>
                </div>
                <!-- KPI Card 3 -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm interactive-card">
                    <div class="text-indigo-600 text-sm font-semibold uppercase tracking-wider mb-2">Goal</div>
                    <div class="text-lg font-medium text-stone-800">Grade A Capstone</div>
                    <p class="text-stone-500 text-sm mt-2">
                        Built on robust algorithms (Graph theory for debt, Haversine for pace) and modern architecture.
                    </p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8">
                <!-- Project Pillars -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                    <h3 class="font-bold text-stone-800 mb-4 border-b border-stone-100 pb-2">Core Technical Pillars</h3>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center text-xs font-bold mt-0.5">1</span>
                            <div class="ml-3">
                                <span class="block text-sm font-bold text-stone-800">Real-time Data Fabric</span>
                                <span class="text-sm text-stone-500">Firestore <code>onSnapshot</code> listeners ensuring all users see changes instantly.</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center text-xs font-bold mt-0.5">2</span>
                            <div class="ml-3">
                                <span class="block text-sm font-bold text-stone-800">Structured AI</span>
                                <span class="text-sm text-stone-500">Gemini 1.5 in JSON Mode for deterministic data output, not just chat text.</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center text-xs font-bold mt-0.5">3</span>
                            <div class="ml-3">
                                <span class="block text-sm font-bold text-stone-800">Hybrid Security</span>
                                <span class="text-sm text-stone-500">Node.js proxy layer to protect API keys while keeping the UI snappy.</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Quick Actions -->
                <div class="bg-indigo-50 p-6 rounded-xl border border-indigo-100">
                    <h3 class="font-bold text-indigo-900 mb-4">Immediate Priorities (Phase 1)</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg border border-indigo-100">
                            <span class="text-sm text-stone-700">Setup React 19 + Vite</span>
                            <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-bold">Done</span>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg border border-indigo-100">
                            <span class="text-sm text-stone-700">Auth0 Integration</span>
                            <span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded-full font-bold">In Progress</span>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-lg border border-indigo-100">
                            <span class="text-sm text-stone-700">Firestore Schema Design</span>
                            <span class="px-2 py-1 bg-stone-200 text-stone-600 text-xs rounded-full font-bold">Pending</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: ROADMAP -->
        <section id="view-roadmap" class="view-section p-6 md:p-10 max-w-6xl mx-auto hidden space-y-6">
            <header>
                <h2 class="text-3xl font-bold text-stone-900 mb-2">12-Week Roadmap</h2>
                <p class="text-stone-600">
                    A phased approach from foundation to localization. Click on a phase to view detailed engineering tasks.
                </p>
            </header>

            <!-- Interactive Timeline Container -->
            <div class="flex flex-col md:flex-row gap-6 h-[600px]">
                
                <!-- Phases List (Left) -->
                <div class="w-full md:w-1/3 overflow-y-auto space-y-3 pr-2" id="phase-list">
                    <!-- Phases injected by JS -->
                </div>

                <!-- Phase Detail View (Right) -->
                <div class="w-full md:w-2/3 bg-white border border-stone-200 rounded-xl p-6 shadow-sm overflow-y-auto relative">
                    <div id="phase-detail-content">
                        <!-- Default State -->
                        <div class="flex flex-col items-center justify-center h-full text-stone-400">
                            <span class="text-4xl mb-4">⟷</span>
                            <p>Select a phase to view engineering tasks.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: ARCHITECTURE -->
        <section id="view-architecture" class="view-section p-6 md:p-10 max-w-6xl mx-auto hidden space-y-8">
            <header>
                <h2 class="text-3xl font-bold text-stone-900 mb-2">System Architecture</h2>
                <p class="text-stone-600">
                    The Hybrid Architecture: Decoupling the frontend experience from the intelligence layer.
                </p>
            </header>

            <!-- Architecture Diagram Area -->
            <div class="bg-white p-8 rounded-xl border border-stone-200 shadow-sm overflow-x-auto">
                <div class="min-w-[800px] grid grid-cols-3 gap-8 relative">
                    
                    <!-- Col 1: Client -->
                    <div class="bg-stone-50 p-4 rounded-lg border border-stone-200 relative group hover:border-teal-400 transition-colors">
                        <div class="absolute -top-3 left-4 bg-stone-800 text-white text-xs px-2 py-1 rounded">Frontend</div>
                        <h3 class="font-bold text-teal-700 mb-4 text-center">React 19 Client</h3>
                        
                        <div class="space-y-2">
                            <div class="p-3 bg-white border border-stone-200 rounded text-sm text-center shadow-sm">
                                <div class="font-bold text-stone-800">State Manager</div>
                                <div class="text-xs text-stone-500">Zustand/Context</div>
                            </div>
                            <div class="p-3 bg-white border border-stone-200 rounded text-sm text-center shadow-sm">
                                <div class="font-bold text-stone-800">UI Components</div>
                                <div class="text-xs text-stone-500">Shadcn + Tailwind v4</div>
                            </div>
                            <div class="p-3 bg-white border border-stone-200 rounded text-sm text-center shadow-sm">
                                <div class="font-bold text-stone-800">Local Algo</div>
                                <div class="text-xs text-stone-500">Haversine Distance</div>
                            </div>
                        </div>

                        <!-- Connector -->
                        <div class="absolute top-1/2 -right-6 w-4 h-0.5 bg-stone-300"></div>
                        <div class="absolute top-1/2 -right-6 text-[10px] bg-white px-1 text-stone-400 transform -translate-y-1/2">JSON</div>
                    </div>

                    <!-- Col 2: Middleware & Auth -->
                    <div class="space-y-6">
                        <!-- Node Proxy -->
                        <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200 relative group hover:border-indigo-400 transition-colors">
                            <div class="absolute -top-3 left-4 bg-indigo-900 text-white text-xs px-2 py-1 rounded">Secure Layer</div>
                            <h3 class="font-bold text-indigo-700 mb-2 text-center">Node.js Proxy</h3>
                            <p class="text-xs text-center text-indigo-800 mb-2">Hides API Keys</p>
                            <div class="border-t border-indigo-200 pt-2 text-center text-xs">
                                ➔ Validates Req<br>
                                ➔ Injects Secrets<br>
                                ➔ Calls Gemini
                            </div>

                            <!-- Connectors -->
                            <div class="absolute top-1/2 -right-6 w-4 h-0.5 bg-indigo-300"></div>
                        </div>

                        <!-- Auth0 -->
                        <div class="bg-orange-50 p-4 rounded-lg border border-orange-200 relative">
                            <h3 class="font-bold text-orange-700 text-center">Auth0</h3>
                            <p class="text-xs text-center text-orange-800">Identity Provider</p>
                        </div>
                    </div>

                    <!-- Col 3: Services -->
                    <div class="bg-stone-50 p-4 rounded-lg border border-stone-200 relative">
                        <div class="absolute -top-3 left-4 bg-stone-800 text-white text-xs px-2 py-1 rounded">External Services</div>
                        <h3 class="font-bold text-stone-700 mb-4 text-center">Cloud & AI</h3>
                        
                        <div class="space-y-3">
                            <div class="p-3 bg-white border-l-4 border-blue-500 rounded text-sm shadow-sm">
                                <div class="font-bold text-stone-800">Google Gemini 1.5</div>
                                <div class="text-xs text-stone-500">Structured Itinerary Generation</div>
                            </div>
                            <div class="p-3 bg-white border-l-4 border-yellow-500 rounded text-sm shadow-sm">
                                <div class="font-bold text-stone-800">Firebase Firestore</div>
                                <div class="text-xs text-stone-500">Real-time NoSQL DB</div>
                            </div>
                            <div class="p-3 bg-white border-l-4 border-green-500 rounded text-sm shadow-sm">
                                <div class="font-bold text-stone-800">Google Maps Platform</div>
                                <div class="text-xs text-stone-500">Places & Geocoding</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Key Flow Description -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="p-5 border border-stone-200 rounded-lg">
                    <h4 class="font-bold text-stone-800 mb-2">Collaborative Flow</h4>
                    <p class="text-sm text-stone-600">User A edits the doc → React writes to Firestore → Firestore triggers `onSnapshot` → User B receives update instantly. No manual refresh needed.</p>
                </div>
                <div class="p-5 border border-stone-200 rounded-lg">
                    <h4 class="font-bold text-stone-800 mb-2">Intelligence Flow</h4>
                    <p class="text-sm text-stone-600">React sends "Trip Context" to Node → Node calls Gemini with System Prompt → Gemini returns JSON → Node validates JSON → React renders UI.</p>
                </div>
            </div>
        </section>

        <!-- SECTION: ALGORITHMS -->
        <section id="view-algorithms" class="view-section p-6 md:p-10 max-w-6xl mx-auto hidden space-y-10">
            <header>
                <h2 class="text-3xl font-bold text-stone-900 mb-2">Core Algorithms</h2>
                <p class="text-stone-600">
                    Interactive simulations of the logic that differentiates Jravel from standard booking sites.
                </p>
            </header>

            <!-- Algorithm 1: Pace Stress Meter -->
            <div class="bg-white p-6 md:p-8 rounded-xl border border-stone-200 shadow-sm">
                <div class="flex flex-col md:flex-row justify-between items-start mb-6">
                    <div>
                        <h3 class="text-xl font-bold text-teal-800">1. Feasibility Engine (Pace Stress Meter)</h3>
                        <p class="text-sm text-stone-500 mt-1 max-w-lg">
                            Uses the Haversine formula to calculate travel time between stops vs. available daylight. 
                            Simulate adding activities to see how the system flags "Hectic" days.
                        </p>
                    </div>
                    <div class="mt-4 md:mt-0 px-3 py-1 bg-stone-100 rounded text-xs font-mono text-stone-600">
                        dist = 2R × sin²(Δlat/2) + ...
                    </div>
                </div>

                <div class="bg-stone-50 p-6 rounded-lg border border-stone-200">
                    <div class="mb-2 flex justify-between text-sm font-semibold text-stone-700">
                        <span>Daily Activity Density</span>
                        <span id="density-val">3 Stops</span>
                    </div>
                    
                    <input type="range" min="1" max="10" value="3" class="w-full h-2 bg-stone-300 rounded-lg appearance-none cursor-pointer accent-teal-600 mb-8" id="stress-slider">
                    
                    <div class="relative pt-6">
                        <div class="flex justify-between text-xs text-stone-400 uppercase font-bold tracking-widest mb-2">
                            <span>Relaxed</span>
                            <span>Balanced</span>
                            <span>Hectic</span>
                            <span>Impossible</span>
                        </div>
                        <div class="h-6 w-full bg-stone-200 rounded-full overflow-hidden relative">
                            <!-- Background Gradients -->
                            <div class="absolute inset-0 bg-gradient-to-r from-green-400 via-yellow-400 to-red-600 opacity-30"></div>
                            <!-- Active Bar -->
                            <div id="meter-bar" class="h-full bg-gradient-to-r from-green-500 via-yellow-500 to-red-600 meter-bar relative" style="width: 30%;"></div>
                        </div>
                        <div class="mt-4 text-center">
                            <span id="stress-status" class="inline-block px-4 py-2 rounded-lg bg-green-100 text-green-800 font-bold border border-green-200 transition-colors">Relaxed Pace</span>
                        </div>
                        <div class="mt-4 p-4 bg-white rounded border border-stone-200 text-sm text-stone-600 italic">
                            <span class="font-bold">AI Feedback:</span> <span id="ai-feedback">Great pace! Plenty of time for exploration.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Algorithm 2: Debt Simplification -->
            <div class="bg-white p-6 md:p-8 rounded-xl border border-stone-200 shadow-sm">
                 <div class="flex flex-col md:flex-row justify-between items-start mb-6">
                    <div>
                        <h3 class="text-xl font-bold text-indigo-800">2. Debt Simplification (Graph Theory)</h3>
                        <p class="text-sm text-stone-500 mt-1 max-w-lg">
                            Reduces the number of transactions in a group. Instead of everyone paying everyone, the algorithm finds the net flow.
                        </p>
                    </div>
                     <div class="mt-4 md:mt-0 px-3 py-1 bg-stone-100 rounded text-xs font-mono text-stone-600">
                        O(N) Complexity
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <!-- Before -->
                    <div class="border border-red-100 bg-red-50 p-4 rounded-lg">
                        <h4 class="font-bold text-red-800 text-sm mb-3 uppercase">Without Optimization (3 Transactions)</h4>
                        <ul class="space-y-2 text-sm text-stone-700">
                            <li class="flex items-center">
                                <span class="w-6 h-6 rounded-full bg-white border border-stone-300 flex items-center justify-center text-xs mr-2">A</span>
                                <span>owes</span>
                                <span class="w-6 h-6 rounded-full bg-white border border-stone-300 flex items-center justify-center text-xs mx-2">B</span>
                                <span class="font-mono font-bold">$10</span>
                            </li>
                            <li class="flex items-center">
                                <span class="w-6 h-6 rounded-full bg-white border border-stone-300 flex items-center justify-center text-xs mr-2">B</span>
                                <span>owes</span>
                                <span class="w-6 h-6 rounded-full bg-white border border-stone-300 flex items-center justify-center text-xs mx-2">C</span>
                                <span class="font-mono font-bold">$10</span>
                            </li>
                             <li class="flex items-center">
                                <span class="w-6 h-6 rounded-full bg-white border border-stone-300 flex items-center justify-center text-xs mr-2">C</span>
                                <span>owes</span>
                                <span class="w-6 h-6 rounded-full bg-white border border-stone-300 flex items-center justify-center text-xs mx-2">D</span>
                                <span class="font-mono font-bold">$10</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Arrow -->
                    <div class="hidden md:flex justify-center text-stone-300 text-2xl">➔</div>

                    <!-- After -->
                    <div class="border border-green-100 bg-green-50 p-4 rounded-lg">
                        <h4 class="font-bold text-green-800 text-sm mb-3 uppercase">With Jravel Algo (1 Transaction)</h4>
                        <div class="flex items-center p-3 bg-white rounded border border-green-200 shadow-sm">
                             <span class="w-8 h-8 rounded-full bg-stone-800 text-white flex items-center justify-center text-sm mr-3">A</span>
                             <div class="flex-1 text-center">
                                 <div class="text-xs text-stone-400">pays directly</div>
                                 <div class="h-0.5 bg-stone-300 w-full my-1 relative">
                                     <div class="absolute right-0 -top-1 border-t-4 border-b-4 border-l-4 border-transparent border-l-stone-300"></div>
                                 </div>
                             </div>
                             <span class="w-8 h-8 rounded-full bg-stone-800 text-white flex items-center justify-center text-sm ml-3">D</span>
                             <span class="ml-4 font-mono font-bold text-green-600">$10</span>
                        </div>
                        <p class="text-xs text-stone-500 mt-2">B and C are removed from the chain completely.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: TECH STACK -->
        <section id="view-stack" class="view-section p-6 md:p-10 max-w-6xl mx-auto hidden space-y-8">
            <header>
                <h2 class="text-3xl font-bold text-stone-900 mb-2">Technology Stack</h2>
                <p class="text-stone-600">
                    A balanced selection of modern libraries for performance, security, and scalability.
                </p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Chart -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm flex items-center justify-center">
                    <div class="chart-container">
                        <canvas id="techChart"></canvas>
                    </div>
                </div>

                <!-- List -->
                <div class="space-y-4">
                    <div class="p-4 bg-white rounded-lg border-l-4 border-teal-500 shadow-sm">
                        <h3 class="font-bold text-stone-800">Frontend</h3>
                        <p class="text-sm text-stone-600 mt-1">React 19, Vite, Tailwind CSS v4, Shadcn UI</p>
                    </div>
                    <div class="p-4 bg-white rounded-lg border-l-4 border-indigo-500 shadow-sm">
                        <h3 class="font-bold text-stone-800">Backend & Auth</h3>
                        <p class="text-sm text-stone-600 mt-1">Node.js (Proxy), Express, Auth0</p>
                    </div>
                    <div class="p-4 bg-white rounded-lg border-l-4 border-yellow-500 shadow-sm">
                        <h3 class="font-bold text-stone-800">Data & AI</h3>
                        <p class="text-sm text-stone-600 mt-1">Firebase Firestore, Google Gemini 1.5 Flash</p>
                    </div>
                    <div class="p-4 bg-white rounded-lg border-l-4 border-stone-500 shadow-sm">
                        <h3 class="font-bold text-stone-800">Utilities</h3>
                        <p class="text-sm text-stone-600 mt-1">Vis.gl (Maps), jsPDF (Export), Workbox (PWA)</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. State Management ---
        const state = {
            currentView: 'overview',
            currentPhase: 1
        };

        // --- 2. Data Store ---
        const roadmapData = [
            {
                id: 1,
                title: "Phase 1: Foundation & Security",
                weeks: "Weeks 1-2",
                desc: "Setting up the scaffolding and secure identity management.",
                tasks: [
                    "Initialize React 19 + Vite + Tailwind v4 repo",
                    "Configure jsconfig.json for path aliases",
                    "Integrate Auth0 for secure login/signup",
                    "Build 'Landing Gate' (Design Trip vs. Book Trip)",
                    "Setup GitHub Actions for CI/CD"
                ],
                status: "In Progress"
            },
            {
                id: 2,
                title: "Phase 2: The Collaborative Engine",
                weeks: "Weeks 3-4",
                desc: "Building the real-time data fabric using NoSQL.",
                tasks: [
                    "Design Firestore 'Trips' collection schema",
                    "Implement RBAC (Admin, Editor, Viewer)",
                    "Code `onSnapshot` listeners for real-time sync",
                    "Build Node.js backend for Invite Emails"
                ],
                status: "Pending"
            },
            {
                id: 3,
                title: "Phase 3: The AI Brain",
                weeks: "Weeks 5-6",
                desc: "Connecting the generative intelligence securely.",
                tasks: [
                    "Develop Node.js Proxy for API Key security",
                    "Implement Gemini JSON Mode for structured output",
                    "Create 'Prompt Engineering' templates for itineraries",
                    "Frontend: Connect Chat UI to Backend Proxy"
                ],
                status: "Pending"
            },
            {
                id: 4,
                title: "Phase 4: Spatial & Monetization",
                weeks: "Weeks 7-8",
                desc: "Visualizing the plan and adding revenue streams.",
                tasks: [
                    "Integrate Google Maps API with Clustering",
                    "Implement 'Deep Linking' for Skyscanner/Viator",
                    "Code the 'Pace Stress Meter' (Haversine Logic)",
                    "Add Location Autocomplete inputs"
                ],
                status: "Pending"
            },
            {
                id: 5,
                title: "Phase 5: Social & Utilities",
                weeks: "Weeks 9-10",
                desc: "Making the plan shareable and budget-friendly.",
                tasks: [
                    "Implement Debt Simplification Algorithm",
                    "Add PDF Export (jspdf-autotable)",
                    "Create WhatsApp Share link generator",
                    "Allow 'Cloning' of public trips"
                ],
                status: "Pending"
            },
            {
                id: 6,
                title: "Phase 6: Localization & Polish",
                weeks: "Weeks 11-12",
                desc: "Preparing for global deployment and offline use.",
                tasks: [
                    "Implement i18next (English/Hindi)",
                    "Configure Vite PWA plugin for offline cache",
                    "Audit Accessibility (A11y)",
                    "Final Deploy: Vercel (FE) + Render (BE)"
                ],
                status: "Pending"
            }
        ];

        // --- 3. Navigation Logic ---
        function router(viewName) {
            // Update State
            state.currentView = viewName;

            // Hide all sections
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            
            // Show target section
            document.getElementById(`view-${viewName}`).classList.remove('hidden');

            // Update Nav Styles
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if(btn.dataset.target === viewName) {
                    btn.classList.add('bg-stone-100', 'text-teal-700');
                    btn.querySelector('span:first-child').classList.remove('text-stone-400');
                    btn.querySelector('span:first-child').classList.add('text-teal-600');
                } else {
                    btn.classList.remove('bg-stone-100', 'text-teal-700');
                    btn.querySelector('span:first-child').classList.add('text-stone-400');
                    btn.querySelector('span:first-child').classList.remove('text-teal-600');
                }
            });

            // Mobile Menu Close
            if(window.innerWidth < 768) {
                document.getElementById('sidebar').classList.add('-translate-x-full');
            }

            // Init Charts if needed
            if (viewName === 'stack') {
                initTechChart();
            }
        }

        // --- 4. Roadmap Logic ---
        function renderRoadmap() {
            const listContainer = document.getElementById('phase-list');
            listContainer.innerHTML = '';

            roadmapData.forEach(phase => {
                const btn = document.createElement('button');
                btn.className = `w-full text-left p-4 rounded-lg border border-stone-200 transition-all hover:bg-stone-50 mb-2 ${phase.id === 1 ? 'border-teal-500 bg-teal-50 ring-1 ring-teal-500' : ''}`;
                btn.onclick = () => showPhaseDetail(phase.id, btn);
                btn.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-xs font-bold text-stone-500 uppercase tracking-wide">${phase.weeks}</span>
                        ${phase.id === 1 ? '<span class="text-[10px] bg-teal-100 text-teal-700 px-1.5 py-0.5 rounded font-bold">CURRENT</span>' : ''}
                    </div>
                    <div class="font-bold text-stone-800 text-sm">${phase.title}</div>
                `;
                listContainer.appendChild(btn);
            });

            // Show first by default
            showPhaseDetail(1, listContainer.firstElementChild);
        }

        function showPhaseDetail(id, btnElement) {
            const phase = roadmapData.find(p => p.id === id);
            const contentDiv = document.getElementById('phase-detail-content');
            
            // Reset styles
            const buttons = document.getElementById('phase-list').children;
            for(let b of buttons) {
                b.classList.remove('border-teal-500', 'bg-teal-50', 'ring-1', 'ring-teal-500');
                b.classList.add('border-stone-200');
            }
            // Active style
            btnElement.classList.remove('border-stone-200');
            btnElement.classList.add('border-teal-500', 'bg-teal-50', 'ring-1', 'ring-teal-500');

            // Render Content
            contentDiv.innerHTML = `
                <div class="animate-fade-in">
                    <div class="flex items-center justify-between border-b border-stone-100 pb-4 mb-4">
                        <h3 class="text-2xl font-bold text-teal-800">${phase.title}</h3>
                        <span class="px-3 py-1 bg-stone-100 text-stone-600 rounded-full text-xs font-bold">${phase.status}</span>
                    </div>
                    <p class="text-stone-600 mb-6 italic">${phase.desc}</p>
                    
                    <h4 class="font-bold text-stone-800 mb-3 text-sm uppercase tracking-wide">Engineering Tasks</h4>
                    <ul class="space-y-3">
                        ${phase.tasks.map(task => `
                            <li class="flex items-start p-3 bg-stone-50 rounded-lg border border-stone-100">
                                <span class="text-teal-500 mr-3">✔</span>
                                <span class="text-stone-700 text-sm font-medium">${task}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
        }

        // --- 5. Algorithm Logic (Stress Meter) ---
        function initStressMeter() {
            const slider = document.getElementById('stress-slider');
            const densityVal = document.getElementById('density-val');
            const meterBar = document.getElementById('meter-bar');
            const statusLabel = document.getElementById('stress-status');
            const feedback = document.getElementById('ai-feedback');

            slider.addEventListener('input', (e) => {
                const val = parseInt(e.target.value);
                const percent = val * 10;
                
                densityVal.innerText = `${val} Stops`;
                meterBar.style.width = `${percent}%`;

                // Logic Simulation
                if (val <= 3) {
                    statusLabel.className = 'inline-block px-4 py-2 rounded-lg bg-green-100 text-green-800 font-bold border border-green-200 transition-colors';
                    statusLabel.innerText = "Relaxed Pace";
                    feedback.innerText = "Great pace! Plenty of time for exploration and leisure.";
                } else if (val <= 6) {
                    statusLabel.className = 'inline-block px-4 py-2 rounded-lg bg-yellow-100 text-yellow-800 font-bold border border-yellow-200 transition-colors';
                    statusLabel.innerText = "Balanced/Active";
                    feedback.innerText = "A busy day. Ensure travel times between stops are short.";
                } else if (val <= 8) {
                    statusLabel.className = 'inline-block px-4 py-2 rounded-lg bg-orange-100 text-orange-800 font-bold border border-orange-200 transition-colors';
                    statusLabel.innerText = "Hectic";
                    feedback.innerText = "Warning: This itinerary leaves almost no buffer for delays.";
                } else {
                    statusLabel.className = 'inline-block px-4 py-2 rounded-lg bg-red-100 text-red-800 font-bold border border-red-200 transition-colors';
                    statusLabel.innerText = "Impossible";
                    feedback.innerText = "Critical: Total travel time exceeds daylight hours. Remove items.";
                }
            });
        }

        // --- 6. Chart.js Logic ---
        let techChartInstance = null;

        function initTechChart() {
            if (techChartInstance) return;

            const ctx = document.getElementById('techChart').getContext('2d');
            techChartInstance = new Chart(ctx, {
                type: 'polarArea',
                data: {
                    labels: ['React/Frontend', 'Node/Backend', 'Auth0/Security', 'Gemini/AI', 'Firestore/DB', 'Tools/DevOps'],
                    datasets: [{
                        label: 'Tech Stack Distribution',
                        data: [9, 7, 8, 9, 8, 6],
                        backgroundColor: [
                            'rgba(20, 184, 166, 0.6)', // Teal
                            'rgba(99, 102, 241, 0.6)', // Indigo
                            'rgba(249, 115, 22, 0.6)', // Orange
                            'rgba(59, 130, 246, 0.6)', // Blue
                            'rgba(234, 179, 8, 0.6)',  // Yellow
                            'rgba(120, 113, 108, 0.6)' // Stone
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            ticks: { display: false },
                            grid: { color: '#e7e5e4' }
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        // --- 7. Mobile Menu ---
        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        });

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderRoadmap();
            initStressMeter();
            router('overview'); // Start at overview
        });

    </script>
</body>
</html>